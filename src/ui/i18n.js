export const I18N = {
  en: {
    dayLabel: "Day {day}",
    settings: "Settings",
    settingsTitle: "Settings",
    close: "Close",
    languages: "Languages",
    sound: "Sound",
    soundOn: "Sound: On",
    soundOff: "Sound: Off",
    diary: "Diary",
    english: "English",
    japanese: "日本語",
    stamina: "Stamina",
    morale: "Morale",
    healthAria: "Health {current} of {max}",
    heart: "Heart",
    lostHeart: "Lost heart",
    dead: "Dead",
    portraitAlt: "{name} portrait",
    progressText: "Gishute",
    journeyStart: "Palumite",
    travelDistance: "Travel distance",
    travelLabels: ["stay", "within sight", "comfortable", "extended", "determined"],
    stay: "Stay",
    walk: "Walk",
    confirmTravel: "Confirm travel and generate tasks",
    embark: "Embark",
    noFree: "No one is free right now.",
    physique: "Physique",
    intellect: "Intellect",
    charisma: "Charisma",
    passed: "PASSED",
    failed: "FAILED",
    preparingTasks: "Preparing Tasks...",
    consulting: "Consulting the forest spirits for today's challenges.",
    morning: "Morning",
    morningTip: "Choose your pace wisely. Every extra step makes the journey crueler.",
    daytime: "Daytime",
    simulateDay: "Simulate Day",
    nightfall: "Nightfall",
    nextDay: "Next Day",
    journeyEnd: "Journey End",
    winText: "After a long and harsh journey, we have reached Gishute.<br><br>Thank you for playing!",
    loseText: "All travelers are gone. The forest keeps its silence.",
    tasks: "Tasks",
    processing: "Processing...",
    log: "Log",
    noEvents: "No events yet.",
    showLog: "Show log",
    hideLog: "Hide log",
    backstory: "Backstory",
    noBackstory: "No backstory available yet.",
    tiredBubble: "I'm tired...",
    hopelessBubble: "I feel hopeless...",
    introTitle: "Embark",
    introBody: "Lead your small band through the hostile forest. Assign the right companions to tasks, mind their stamina and morale, and push toward safety before time runs out.",
    introBullet1: "More tasks are generated the farther you travel.",
    introBullet2: "Drag companions onto tasks; reassign or return them as needed.",
    introBullet3: "Dead companions cannot be used; keep everyone alive and well.",
    startJourney: "Start your journey",
    skipIntro: "Skip intro",
    howToPlay: "How to Play",
    tutorialCaptions: [
      "Welcome to the world of EMBARK.<br>Your objective is to reach Gishute on the map above.",
      "Every morning, you get to decide how far you want to travel that day by adjusting the slider. <br> Click 'Embark' to confirm your decision.",
      "When tasks are generated, assign NPCs by drag-and-dropping their card.<br><br>Look at the required skills: Physique, Intellect, and Charisma.<br>Try to satisfy them.<br><br>If you assign 2 NPCs to a same task, they will interact with each other.",
      "NPCs with low morale are more likely to fail.<br>Keep an eye on their facial cues.",
      "Click the vase icon on the left to check the relationships between NPCs.<br>The better the relationship, the better the chance of successfully completing a task together.<br>Relationships improve when two NPCs clear a task together."
    ],
    openingCutscene: "Opening",
    beginJourney: "Begin the journey",
    nextLine: "Next",
    campChatter: "Camp Chatter",
    successReport: "Success Report",
    failureReport: "Failure Report",
    penaltyAll: "all companions",
    penaltyAssigned: "assigned companions",
    penaltyText: "On fail, {who} will take {damage} damage."
  },
  ja: {
    dayLabel: "{day}日目",
    settings: "設定",
    settingsTitle: "設定",
    close: "閉じる",
    languages: "Languages",
    sound: "サウンド",
    soundOn: "サウンド: オン",
    soundOff: "サウンド: オフ",
    diary: "日記",
    english: "English",
    japanese: "日本語",
    stamina: "スタミナ",
    morale: "士気",
    healthAria: "体力 {current}/{max}",
    heart: "ハート",
    lostHeart: "失ったハート",
    dead: "死亡",
    portraitAlt: "{name}の肖像",
    progressText: "ギシュテ",
    journeyStart: "パルミテ",
    travelDistance: "移動距離",
    travelLabels: ["居座る", "視界内", "ふつう", "長距離", "決死の覚悟"],
    stay: "待機",
    walk: "歩く",
    confirmTravel: "移動距離を確定してタスクを生成",
    embark: "出発",
    noFree: "今は手が空いている人がいない。",
    physique: "体力",
    intellect: "知力",
    charisma: "魅力",
    passed: "成功",
    failed: "失敗",
    preparingTasks: "タスク準備中...",
    consulting: "今日の試練について森の声を聞いています。",
    morning: "朝",
    morningTip: "先を急ぐこともできるが、一気に進みすぎるのは危険だ。",
    daytime: "昼",
    simulateDay: "一日を進める",
    nightfall: "夜",
    nextDay: "翌日へ",
    journeyEnd: "旅の終わり",
    winText: "長い試練の末、ギシュテに到達した。<br><br>Thank you for playing!",
    loseText: "旅の仲間は皆倒れ、森は沈黙した。",
    tasks: "タスク",
    processing: "処理中...",
    log: "ログ",
    noEvents: "まだ出来事はない。",
    showLog: "ログを表示",
    hideLog: "ログを隠す",
    backstory: "背景",
    noBackstory: "背景はまだありません。",
    tiredBubble: "疲れている...",
    hopelessBubble: "希望がない...",
    introTitle: "Embark",
    introBody: "小隊と共に、危険な森を進め。適切に任務を割り当て、スタミナと士気を管理し、時間内に安全へ辿り着け。",
    introBullet1: "移動距離が長いほど、より多くのタスクが生成される。",
    introBullet2: "仲間をタスクへドラッグして割り当て、必要に応じて戻せる。",
    introBullet3: "死亡した仲間は使用できない。誰も死なせるな。",
    startJourney: "旅を始める",
    skipIntro: "導入をスキップ",
    howToPlay: "遊び方",
    tutorialCaptions: [
      "EMBARKの世界へようこそ。<br>ゲームのクリア条件は、地図上のギシュテに到達することです。",
      "朝が来たら、スライダーを調整して、その日の移動距離を決めましょう。<br>「Embark」をクリックして確定します。",
      "タスクが生成されたら、キャラカードをドラッグしてキャラを割り当てましょう。<br><br>必要スキル（体力・知力・魅力）を確認してください。<br>なるべく満たすようにしましょう。<br><br>また、同じタスクに2人割り当てると、NPC同士で交流が発生します。",
      "士気が低いNPCほどタスクに失敗しやすいです。<br>彼らの表情の変化に注意しましょう。",
      "左の壺アイコンをクリックすると、NPC同士の関係を確認できます。<br>関係が良いほど、一緒に挑んだタスクの成功率が上がります。<br>また、一緒にタスクに成功すると、関係性が向上します。"
    ],
    openingCutscene: "プロローグ",
    beginJourney: "旅を始める",
    nextLine: "次へ",
    campChatter: "仲間の会話",
    successReport: "成功の記録",
    failureReport: "失敗の記録",
    penaltyAll: "全員",
    penaltyAssigned: "担当者",
    penaltyText: "失敗すると{who}が{damage}ダメージを受ける。"
  }
};

export function getLanguage(gameState) {
  return gameState.language === "ja" ? "ja" : "en";
}

export function getTravelLabels(gameState) {
  const lang = getLanguage(gameState);
  return (I18N[lang] || I18N.en).travelLabels;
}

export function getTutorialCaptions(gameState) {
  const lang = getLanguage(gameState);
  const dict = I18N[lang] || I18N.en;
  return dict.tutorialCaptions || I18N.en.tutorialCaptions || [];
}

export function t(gameState, key, vars = {}) {
  const lang = getLanguage(gameState);
  const dict = I18N[lang] || I18N.en;
  let value = dict[key] ?? I18N.en[key] ?? "";
  return Object.keys(vars).reduce((acc, k) => acc.replaceAll(`{${k}}`, vars[k]), value);
}
